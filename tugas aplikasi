#include <windows.h>
#include <iostream>
#include <stdio.h>
#ifdef __APPLE__
#include <GLUT/glut.h>
#else
#include <GL/glut.h>
#include <GL/glu.h>
#endif

#include <stdlib.h>
using namespace std;
//untuk pergerakan dan edit warna objek
float posY = 0.0, posX = 0.0,color1 = 0.1,color2 = 0.5,color3 = 0.1,nilai_awal = 1.0,kelipatan = 2.0,kecepatan = 0.0;

//untuk interaksi objek
float objekx = 1.19,objeky =1.2;

//ubah background
float a= 1.0,b=1.0,c=1.0,t=4.5;

void display(){

glClear (GL_COLOR_BUFFER_BIT);
    glPointSize(15);
    // objek target
    glColor3f(1.0,0.0,0.0);
    glBegin(GL_POLYGON);
        glVertex2f(4.5,5.0);
        glVertex2f(t,t);
        glVertex2f(5.0,4.5);
        glVertex2f(5.0,5.0);
    glEnd();
    glColor3f(1.0,0.0,0.0);
    glBegin(GL_POLYGON);
        glVertex2f(-5.0,5.0);
        glVertex2f(-5.0,4.5);
        glVertex2f(-4.5,4.5);
        glVertex2f(-4.5,5.0);
    glEnd();
    glColor3f(1.0,a,0.0);
    glBegin(GL_POLYGON);
        glVertex2f(-5.0,-4.5);
        glVertex2f(-5.0,-5.0);
        glVertex2f(-4.5,-5.0);
        glVertex2f(-4.5,-4.5);
    glEnd();
    glColor3f(1.0,0.0,0.0);
    glBegin(GL_POLYGON);
        glVertex2f(4.5,-4.5);
        glVertex2f(4.5,-5.0);
        glVertex2f(5.0,-5.0);
        glVertex2f(5.0,-4.5);
    glEnd();
    // objek target

    // objek utama
    glColor3f(color1,color2,color3);
    glBegin(GL_POLYGON);
        glVertex2f(objekx+posX,objeky+posY);
        glVertex2f(0.57+posX,1.21+posY);
        glVertex2f(1.19+posX,0.6+posY);
    glEnd();

    glColor3f(color1,color2,color3);
    glBegin(GL_POLYGON);
        glVertex2f(0.8+posX,1.0+posY);
        glVertex2f(0.41+posX,0.62+posY);
        glVertex2f(0.6+posX,0.43+posY);
        glVertex2f(0.99+posX,0.79+posY);
    glEnd();

    glColor3f(1.0,1.0,0.0);
    glBegin(GL_POINTS);
        glVertex2f(0.23+posX,0.57+posY);
        glVertex2f(0.24+posX,0.34+posY);
        glVertex2f(0.05+posX,0.34+posY);
        glVertex2f(-0.16+posX,0.26+posY);
        glVertex2f(0.11+posX,0.16+posY);
        glVertex2f(0.13+posX,-0.05+posY);
        glVertex2f(0.0+posX,0.0+posY);
        glVertex2f(0.44+posX,0.23+posY);
        glVertex2f(-0.3+posX,0.12+posY);
        glVertex2f(-0.24+posX,-0.09+posY);
        glVertex2f(0.18+posX,-0.22+posY);
        glVertex2f(0.37+posX,0.0+posY);
    glEnd();
    //objek utama

glFlush();
//respon();
}
void respon(){
    if(objekx+posX >= t | objeky+posY >= t){
        a=0.0;
        display();
    }
}
void react(unsigned char key, int x, int y){
    if(key == 'i' || key == 'I'){
        posY +=0.2;
        posY +=kecepatan;
        display();
    }
    else if(key == 'k' || key == 'K'){
        posY -=0.2;
        posY -= kecepatan;
        display();
    }else if(key == 'l' || key == 'L'){
        posX+=0.2;
        posX+= kecepatan;
        display();
    }else if(key == 'j' || key == 'J'){
        posX -= 0.2;
        posX -= kecepatan;
        display();
    }else if(key == 'u' || key == 'U'){
        posX-=0.2;
        posY+=0.2;
        posX-=kecepatan;
        posY+=kecepatan;
        display();
    }else if(key == 'o' || key == 'O'){
        posX+=0.2;
        posY+=0.2;
        posX+=kecepatan;
        posY+=kecepatan;
        display();
    }else if(key == 'n' || key == 'N'){
        posX-=0.2;
        posY-=0.2;
        posX-=kecepatan;
        posY-=kecepatan;
        display();
    }else if(key == 'm' || key == 'M'){
        posX+=0.2;
        posY-=0.2;
        posX+=kecepatan;
        posY-=kecepatan;
        display();
    }else{
        cout <<"salah pencet"<<endl;
    }
    respon();
}
void arah(int key, int x, int y){
    if(key == GLUT_KEY_UP){ //untuk mengubah kecepatan
        nilai_awal *= kelipatan;
        kecepatan = nilai_awal;
        display();
        cout <<kecepatan<<endl;
    }else if(key == GLUT_KEY_DOWN){ //untuk mengubah kecepatan
        nilai_awal /= kelipatan;
        kecepatan = nilai_awal;
        display();
        cout <<kecepatan<<endl;
    }else if(key == GLUT_KEY_LEFT){//untuk mengubah warna
        color1 += 0.1;
        color3 -= 0.1;
        display();
    }else if(key == GLUT_KEY_RIGHT){//untuk mengubah warna
        color3 += 0.1;
        color1 -= 0.1;
        display();
    }else {
        cout <<"salah pencet"<<endl;
    }
}
void myinit(){
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(-10.0,10.0,-10.0,10.0);
    glMatrixMode(GL_MODELVIEW);
    glClearColor(1.0,1.0,1.0,1.0);
    glColor3f (0.0, 1.0, 0.0);
}
int main(int argc, char* argv[]){
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(700,700);
    //glutInitWindowPosition(100,100);
    glutCreateWindow("Tugas Animasi");
    glutDisplayFunc(display);
    glutKeyboardFunc(react);
    glutSpecialFunc(arah);
    //respon();
    myinit();
    glutMainLoop();
    return 0;
}
